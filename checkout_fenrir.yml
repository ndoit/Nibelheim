- name: Install Git
  sudo: true
  yum:
      name: git
      state: latest
# Install needed packages for fenrir. Most involve database connections
- name: install developer tools
  sudo: true
  include: yum_development_tools.yml
- name: Install Oracle Instant Client for ruby oci8 gem for Banner
  sudo: true
  include: oracle_instant_client.yml
- name: install free-tds requirement
  sudo: true
  yum:
    name: freetds
    state: latest
  yum:
    name: freetds-devel
    state: latest
- name: install imagemagick for paperclip gem
  sudo: true
  yum:
    name: ImageMagick
    state: latest
  yum:
    name: ImageMagick-devel
    state: latest
# Configure Github
- name: add color to git output
  command: git config --global color.ui true
- name: add github username
  command: git config --global user.name {{git_user_name}}
- name: add github email
  command: git config --global user.email {{git_email}}
# Create and clone fenrir
- name: create directory to house fenrir
  file:
    path: /vagrant/fenrir
    state: directory
- git:
    repo: ssh://git@github.com/ndoit/fenrir.git
    dest: /vagrant/fenrir
    accept_hostkey: true
# install extra global gems
- name: install bundler
  command: rvm @global do gem install bundler
- name: install rubocop
  command: rvm @global do gem install haml_lint
- name: install brakeman
  command: rvm @global do gem install brakeman
- name: install haml-lint
  command: rvm @global do gem install haml_lint
# install npm
- name: install npm
  sudo: true
  yum:
    name: npm
    state: latest
